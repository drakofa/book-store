<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BookStore</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>
<body>
    <div id="app">
        <!-- –®–∞–ø–∫–∞ -->
        <header class="header">
            <div class="container">
                <h1 @click="goToHome" class="logo">üìö BookStore</h1>
                <nav class="nav">
                    <button @click="goToHome" class="nav-btn">–ö–∞—Ç–∞–ª–æ–≥</button>
                    <button @click="showFavorites = !showFavorites" class="nav-btn">
                        –ò–∑–±—Ä–∞–Ω–Ω–æ–µ ({{ favoritesCount }})
                    </button>
                </nav>
            </div>
        </header>

        <main class="main">
            <div class="container">
                <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–∞—Ç–∞–ª–æ–≥–∞ -->
                <div v-if="currentView === 'catalog'" class="catalog-page">
                    <h2>–ö–∞—Ç–∞–ª–æ–≥ –∫–Ω–∏–≥</h2>
                    <div class="books-grid">
                        <div 
                            v-for="book in books" 
                            :key="book.id" 
                            class="book-card"
                            @click="openBook(book)"
                        >
                            <div class="book-image">
                                <img :src="book.cover" :alt="book.title">
                                <button 
                                    @click.stop="toggleFavorite(book.id)"
                                    class="favorite-btn"
                                    :class="{ active: isFavorite(book.id) }"
                                >
                                    ‚ô•
                                </button>
                            </div>
                            <div class="book-info">
                                <h3>{{ book.title }}</h3>
                                <p class="author">{{ book.author }}</p>
                                <p class="price">{{ book.price }} ‚ÇΩ</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–Ω–∏–≥–∏ -->
                <div v-if="currentView === 'book'" class="book-page">
                    <button @click="goToHome" class="back-btn">‚Üê –ù–∞–∑–∞–¥ –∫ –∫–∞—Ç–∞–ª–æ–≥—É</button>
                    
                    <div v-if="currentBook" class="book-detail">
                        <div class="book-detail-image">
                            <img :src="currentBook.cover" :alt="currentBook.title">
                        </div>
                        <div class="book-detail-info">
                            <h1>{{ currentBook.title }}</h1>
                            <p class="author">{{ currentBook.author }}</p>
                            <p class="description">{{ currentBook.description }}</p>
                            <p class="price">{{ currentBook.price }} ‚ÇΩ</p>
                            
                            <div class="actions">
                                <button 
                                    @click="toggleFavorite(currentBook.id)"
                                    class="favorite-btn large"
                                    :class="{ active: isFavorite(currentBook.id) }"
                                >
                                    {{ isFavorite(currentBook.id) ? '‚ù§Ô∏è –í –∏–∑–±—Ä–∞–Ω–Ω–æ–º' : 'ü§ç –í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ' }}
                                </button>
                                <button class="buy-btn">–ö—É–ø–∏—Ç—å</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ -->
        <div v-if="showFavorites" class="favorites-sidebar">
            <div class="sidebar-header">
                <h3>–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</h3>
                <button @click="showFavorites = false" class="close-btn">√ó</button>
            </div>
            <div v-if="favoriteBooks.length === 0" class="empty">
                –í –∏–∑–±—Ä–∞–Ω–Ω–æ–º –ø–æ–∫–∞ –Ω–∏—á–µ–≥–æ –Ω–µ—Ç
            </div>
            <div v-else class="favorites-list">
                <div 
                    v-for="book in favoriteBooks" 
                    :key="book.id" 
                    class="favorite-item"
                    @click="openBook(book)"
                >
                    <img :src="book.cover" :alt="book.title">
                    <div class="favorite-info">
                        <h4>{{ book.title }}</h4>
                        <p>{{ book.price }} ‚ÇΩ</p>
                    </div>
                    <button @click.stop="removeFromFavorites(book.id)" class="remove-btn">√ó</button>
                </div>
            </div>
        </div>

        <!-- –ó–∞—Ç–µ–º–Ω–µ–Ω–∏–µ —Ñ–æ–Ω–∞ -->
        <div v-if="showFavorites" class="overlay" @click="showFavorites = false"></div>
    </div>

    <script src="data/books.js"></script>
    <script src="js/app.js"></script>
</body>
</html>